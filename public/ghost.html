<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Forest Platformer</title>
    <style>
        * {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            overflow: hidden;
            background-color: #001f3f;
        }

        #game-container {
            position: absolute;
            width: 100vw;
            height: 100vh;
            overflow: hidden;
            background-color: #001f3f;
            border: 2px solid #000;
        }

        #player {
            position: absolute;
            bottom: 50px;
            left: 100px;
            width: 50px;
            height: 50px;
            background-size: cover;
            background-repeat: no-repeat;
            background-image: url('https://github.com/Sethfd/Gamedev2024-Seth-/blob/main/public/pixil-frame-0%20(25).png?raw=true'); /* New player icon */
            z-index: 10;
            transition: left 0.1s, bottom 0.1s;
            animation: sway 1s infinite alternate; /* Sway animation for the player */
        }

        @keyframes sway {
            0% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
            100% { transform: translateY(0); }
        }

        #ground {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 50px;
            background-image: url('https://github.com/Sethfd/Gamedev2024-Seth-/blob/main/public/pixil-frame-0%20(24).png?raw=true');
            background-size: cover;
        }

        .tree {
            position: absolute;
            bottom: 50px;
            width: 100px;
            height: 100px;
            background-size: cover;
            background-repeat: no-repeat;
        }

        #score {
            position: absolute;
            top: 10px;
            left: 10px;
            color: white;
            font-size: 24px;
        }
    </style>
</head>
<body>
    <div id="game-container">
        <div id="player"></div>
        <div id="ground"></div>
        <div id="score">Score: 0</div>
    </div>
    <script>
        const player = document.getElementById('player');
        const ground = document.getElementById('ground');
        const scoreDisplay = document.getElementById('score');
        const trees = [];
        let score = 0;

        const playerState = {
            positionX: 100,
            speed: 5,
            isJumping: false,
            jumpHeight: 150,
            jumpSpeed: 4,
            playerBottom: 50,
        };

        const playerFrames = [
            'https://github.com/Sethfd/Gamedev2024-Seth-/blob/main/public/pixil-frame-0%20(25).png?raw=true'
        ];
        let frame = 0;
        let lastFrameTime = 0;
        const frameDuration = 100;

        function createTree(xPosition) {
            const tree = document.createElement('div');
            tree.classList.add('tree');
            tree.style.left = `${xPosition}px`;
            tree.style.backgroundImage = 'url("https://github.com/Sethfd/Gamedev2024-Seth-/blob/main/public/pixil-frame-0%20(18).png?raw=true")';
            document.getElementById('game-container').appendChild(tree);
            trees.push(tree);
        }

        for (let i = 0; i < 18; i++) {
            createTree(Math.random() * window.innerWidth);
        }

        document.addEventListener('keydown', (event) => {
            if (event.code === 'ArrowLeft') {
                playerState.positionX -= playerState.speed;
                playerState.positionX = Math.max(playerState.positionX, 0);
                player.style.left = `${playerState.positionX}px`;
                moveTrees(playerState.speed);
            }
            if (event.code === 'ArrowRight') {
                playerState.positionX += playerState.speed;
                playerState.positionX = Math.min(playerState.positionX, window.innerWidth - 50);
                player.style.left = `${playerState.positionX}px`;
                moveTrees(-playerState.speed);
            }
            if (event.code === 'Space' && !playerState.isJumping) {
                playerState.isJumping = true;
            }
        });

        function moveTrees(amount) {
            trees.forEach(tree => {
                const currentLeft = parseInt(tree.style.left);
                tree.style.left = `${currentLeft + amount}px`;
                if (currentLeft < -100) {
                    tree.style.left = `${window.innerWidth}px`;
                    score += 1;
                    scoreDisplay.innerText = `Score: ${score}`;
                }
            });
        }

        function gameLoop(timestamp) {
            if (playerState.isJumping) {
                if (playerState.playerBottom < playerState.jumpHeight) {
                    playerState.playerBottom += playerState.jumpSpeed;
                } else {
                    playerState.isJumping = false;
                }
            } else if (playerState.playerBottom > 50) {
                playerState.playerBottom -= playerState.jumpSpeed;
            }

            player.style.bottom = `${playerState.playerBottom}px`;

            if (timestamp - lastFrameTime >= frameDuration) {
                frame = (frame + 1) % playerFrames.length;
                player.style.backgroundImage = `url(${playerFrames[frame]})`;
                lastFrameTime = timestamp;
            }

            requestAnimationFrame(gameLoop);
        }

        gameLoop();
    </script>
</body>
</html>
