<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Mysterious Castle</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; margin: 50px; }
        button { padding: 10px 20px; margin: 10px; }
        .hidden { display: none; }
    </style>
</head>
<body>
    <h1>Welcome to The Mysterious Castle!</h1>
    <p id="room-description">You've entered a castle filled with secrets!</p>
    
    <div id="battle" class="hidden">
        <h2>Enemy: Haunted Knight</h2>
        <p id="enemy-health">Enemy Health: 40</p>
        <p id="player-health">Your Health: 100</p>
        <button onclick="attack()">Attack</button>
        <button onclick="dodge()">Dodge</button>
        <button onclick="heal()">Heal</button>
    </div>
    
    <button id="continue-button" class="hidden" onclick="nextRoom()">Continue</button>

    <ul id="room-list">
        <li>The Grand Hall</li>
        <li>The Library of Shadows</li>
        <li>The Armory of Ghosts</li>
        <li>The Dining Room of Spirits</li>
        <li>The Secret Passage</li>
        <li>The Tower of Secrets</li>
        <li>The Chamber of Whispers</li>
        <li>The Balcony of Night</li>
        <li>The Enchanted Gallery</li>
        <li>The Throne Room</li>
        <li>The Hidden Vault</li>
        <li>The Cursed Portraits</li>
        <li>The Forgotten Cellar</li>
        <li>The Crypt of the Ancients</li>
        <li>The Chamber of Illusions</li>
        <li>The Hall of Mirrors</li>
        <li>The Rooftop Garden</li>
        <li>The Banshee's Lair</li>
        <li>The Hidden Stairway</li>
        <li>The Exit</li>
        <li>The Pit of Despair (Trap Room)</li>
        <li>The Hall of Shadows (Trap Room)</li>
    </ul>

    <button id="start-fight" onclick="startFight()">Start Fight</button>
    <button onclick="nextRoom()">Next Room</button>
    <button onclick="location.href='world4.html'">Next World</button>
    <button onclick="location.href='index.html'">Back to Menu</button>

    <script>
        let playerHealth = 100;
        let enemyHealth = 40;
        let inBattle = false;
        const rooms = [
            "The Grand Hall",
            "The Library of Shadows",
            "The Armory of Ghosts",
            "The Dining Room of Spirits",
            "The Secret Passage",
            "The Tower of Secrets",
            "The Chamber of Whispers",
            "The Balcony of Night",
            "The Enchanted Gallery",
            "The Throne Room",
            "The Hidden Vault",
            "The Cursed Portraits",
            "The Forgotten Cellar",
            "The Crypt of the Ancients",
            "The Chamber of Illusions",
            "The Hall of Mirrors",
            "The Rooftop Garden",
            "The Banshee's Lair",
            "The Hidden Stairway",
            "The Exit",
            "The Pit of Despair (Trap Room)",
            "The Hall of Shadows (Trap Room)"
        ];

        function startFight() {
            inBattle = true;
            enemyHealth = 40; // Reset enemy health for each fight
            document.getElementById('battle').classList.remove('hidden');
            document.getElementById('start-fight').classList.add('hidden');
            document.getElementById('continue-button').classList.add('hidden');
        }

        function attack() {
            const damage = Math.floor(Math.random() * 20) + 5;
            enemyHealth -= damage;
            document.getElementById('enemy-health').innerText = `Enemy Health: ${enemyHealth}`;
            if (enemyHealth <= 0) {
                alert('You defeated the enemy!');
                inBattle = false;
                document.getElementById('continue-button').classList.remove('hidden');
                document.getElementById('battle').classList.add('hidden');
            } else {
                enemyAttack();
            }
        }

        function dodge() {
            alert('You dodged the attack!');
            enemyAttack();
        }

        function heal() {
            const healAmount = Math.floor(Math.random() * 15) + 5;
            playerHealth += healAmount;
            document.getElementById('player-health').innerText = `Your Health: ${playerHealth}`;
            enemyAttack();
        }

        function enemyAttack() {
            if (inBattle) {
                const damage = Math.floor(Math.random() * 10) + 5;
                playerHealth -= damage;
                document.getElementById('player-health').innerText = `Your Health: ${playerHealth}`;
                if (playerHealth <= 0) {
                    alert('You were defeated! Game Over.');
                    location.href = 'index.html';
                }
            }
        }

        function nextRoom() {
            const randomIndex = Math.floor(Math.random() * rooms.length);
            const newRoom = rooms[randomIndex];
            document.getElementById('room-description').innerText = `You've entered: ${newRoom}`;
            alert(`You move to the ${newRoom}!`);
        }
    </script>
</body>
</html>

