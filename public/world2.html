<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Single Room Dungeon Explorer</title>
    <style>
        body {
            background-color: #222;
            color: #fff;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            font-family: Arial, sans-serif;
            overflow: hidden;
        }
        canvas {
            border: 2px solid #fff;
        }
        #message {
            position: absolute;
            top: 10px;
            left: 10px;
            background: rgba(0, 0, 0, 0.7);
            padding: 10px;
            border-radius: 5px;
        }
    </style>
</head>
<body>

<canvas id="dungeonCanvas"></canvas>
<div id="message"></div>

<script>
    const canvas = document.getElementById('dungeonCanvas');
    const ctx = canvas.getContext('2d');
    const messageDiv = document.getElementById('message');

    const dungeons = [
        [ // Room 1
            [1, 1, 1, 1, 1, 1, 1, 1],
            [1, 0, 0, 0, 5, 4, 1, 1],
            [1, 0, 2, 0, 0, 0, 0, 1],
            [1, 0, 0, 0, 5, 1, 1, 1],
            [1, 0, 0, 0, 0, 4, 0, 1],
            [1, 0, 1, 0, 0, 1, 1, 1],
            [1, 1, 1, 1, 1, 1, 1, 1]
        ],
        [ // Room 2
            [1, 1, 1, 1, 1, 1, 1, 1],
            [1, 0, 0, 0, 0, 0, 3, 1],
            [1, 0, 0, 0, 0, 0, 0, 1],
            [1, 0, 4, 0, 5, 1, 1, 1],
            [1, 0, 2, 0, 0, 0, 0, 1],
            [1, 1, 1, 1, 1, 1, 1, 1]
        ],
        [ // Room 3
            [1, 1, 1, 1, 1, 1, 1, 1],
            [1, 2, 0, 0, 4, 0, 3, 1],
            [1, 0, 0, 0, 0, 5, 0, 1],
            [1, 0, 4, 0, 0, 0, 0, 1],
            [1, 0, 0, 0, 5, 0, 0, 1],
            [1, 1, 1, 1, 1, 1, 1, 1]
        ],
        [ // Room 4
            [1, 1, 1, 1, 1, 1, 1, 1],
            [1, 0, 5, 0, 0, 0, 2, 1],
            [1, 0, 0, 0, 4, 0, 0, 1],
            [1, 0, 0, 0, 0, 0, 0, 1],
            [1, 1, 1, 1, 1, 1, 1, 1]
        ],
        [ // Room 5
            [1, 1, 1, 1, 1, 1, 1, 1],
            [1, 0, 0, 2, 0, 5, 4, 1],
            [1, 0, 0, 0, 0, 0, 0, 1],
            [1, 0, 0, 0, 3, 0, 0, 1],
            [1, 1, 1, 1, 1, 1, 1, 1]
        ]
    ];

    let currentRoomIndex = 0;
    let playerPos = { x: 1, y: 1 }; // Starting position
    let hasKey = false; 
    let gameOver = false; 
    let won = false; 

    function resizeCanvas() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        drawDungeon();
    }

    function drawDungeon() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        const dungeon = dungeons[currentRoomIndex];
        const cellWidth = canvas.width / dungeon[0].length;
        const cellHeight = canvas.height / dungeon.length;

        for (let y = 0; y < dungeon.length; y++) {
            for (let x = 0; x < dungeon[y].length; x++) {
                switch (dungeon[y][x]) {
                    case 1: ctx.fillStyle = '#555'; break; // Wall
                    case 0: ctx.fillStyle = '#222'; break; // Path
                    case 2: ctx.fillStyle = '#8B4513'; break; // Key
                    case 3: ctx.fillStyle = '#FF0000'; break; // Exit
                    case 4: ctx.fillStyle = '#FF4500'; break; // Enemy
                    case 5: ctx.fillStyle = '#0000FF'; break; // Trap
                }
                ctx.fillRect(x * cellWidth, y * cellHeight, cellWidth, cellHeight);
            }
        }

        // Draw player
        ctx.fillStyle = '#FFD700'; // Player color
        ctx.fillRect(playerPos.x * cellWidth, playerPos.y * cellHeight, cellWidth, cellHeight);

        // Display message
        if (gameOver) {
            messageDiv.textContent = "Game Over! Press R to Restart.";
        } else if (won) {
            messageDiv.textContent = "You found the treasure! Press R to Restart.";
        } else {
            messageDiv.textContent = hasKey ? "You have a key." : "Explore the dungeon!";
        }
    }

    function movePlayer(dx, dy) {
        if (gameOver || won) return;

        const dungeon = dungeons[currentRoomIndex];
        const newX = playerPos.x + dx;
        const newY = playerPos.y + dy;

        if (dungeon[newY] && dungeon[newY][newX] !== undefined) {
            const cell = dungeon[newY][newX];

            if (cell === 1) {
                // Wall
                return;
            } else if (cell === 2) {
                // Key
                hasKey = true;
            } else if (cell === 4) {
                // Enemy
                gameOver = true;
            } else if (cell === 3) {
                // Exit
                won = true;
            } else if (cell === 9) {
                // Locked Door (for room transition)
                if (hasKey) {
                    currentRoomIndex = (currentRoomIndex + 1) % dungeons.length; // Move to the next room
                    playerPos = { x: 1, y: 1 }; // Reset player position
                    hasKey = false; // Reset key status
                }
            }

            playerPos.x = newX;
            playerPos.y = newY;
            drawDungeon();
        }
    }

    function restartGame() {
        currentRoomIndex = 0;
        playerPos = { x: 1, y: 1 };
        hasKey = false;
        gameOver = false;
        won = false;
        drawDungeon();
    }

    window.addEventListener('resize', resizeCanvas);
    window.addEventListener('keydown', (event) => {
        switch (event.key) {
            case 'ArrowUp': movePlayer(0, -1); break;
            case 'ArrowDown': movePlayer(0, 1); break;
            case 'ArrowLeft': movePlayer(-1, 0); break;
            case 'ArrowRight': movePlayer(1, 0); break;
            case 'r': // Restart game
            case 'R': restartGame(); break;
        }
    });

    resizeCanvas(); // Initial canvas setup
</script>

</body>
</html>


